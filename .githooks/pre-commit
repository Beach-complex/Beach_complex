#!/bin/sh
set -e

# GUI tools may not inherit PATH; add common Homebrew locations.
export PATH="$PATH:/usr/local/bin:/opt/homebrew/bin"

# Run Spotless auto-formatting (Java)
if [ -f "./gradlew" ]; then
  ./gradlew spotlessApply
else
  echo "gradlew not found; skipping Spotless."
fi

# Secret scan on staged changes
if [ -x "./scripts/secret-scan.sh" ]; then
  ./scripts/secret-scan.sh
else
  echo "secret-scan.sh not found; skipping secret scan."
fi
